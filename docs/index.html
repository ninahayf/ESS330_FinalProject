<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ESS 330 Project Proposals</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="ESS 330 Project Proposals">
<meta name="citation_author" content="Nina Hayford">
<meta name="citation_author" content="Sierra Mattair">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Literate programming;,citation_author=Donald E. Knuth;,citation_publication_date=1984-05;,citation_cover_date=1984-05;,citation_year=1984;,citation_fulltext_html_url=https://doi.org/10.1093/comjnl/27.2.97;,citation_issue=2;,citation_doi=10.1093/comjnl/27.2.97;,citation_issn=0010-4620;,citation_volume=27;,citation_journal_title=Comput. J.;,citation_publisher=Oxford University Press, Inc.;">
<meta name="citation_reference" content="citation_title=How global temperature and weather patterns affect mountain climates | penn LPS online_2024;,citation_publication_date=2024-01;,citation_cover_date=2024-01;,citation_year=2024;,citation_fulltext_html_url=https://lpsonline.sas.upenn.edu/features/how-global-temperature-and-weather-patterns-affect-mountain-climates;,citation_journal_title=How global temperature and weather patterns affect mountain climates | Penn LPS Online;">
<meta name="citation_reference" content="citation_title=Altitude explained: Understanding the elements, risks, challenges, and research;,citation_author=undefined ITT_User;,citation_publication_date=2023-08;,citation_cover_date=2023-08;,citation_year=2023;,citation_fulltext_html_url=https://iantaylortrekking.com/blog/altitude-explained-understanding-the-elements-risks-challenges-and-research/;,citation_journal_title=Ian Taylor Trekking;">
<meta name="citation_reference" content="citation_title=Biodiversity;,citation_author=Hannah Ritchie;,citation_author=Fiona Spooner;,citation_author=Max Roser;,citation_publication_date=2022-12;,citation_cover_date=2022-12;,citation_year=2022;,citation_fulltext_html_url=https://ourworldindata.org/biodiversity;,citation_journal_title=Our World in Data;">
<meta name="citation_reference" content="citation_publication_date=2024-05;,citation_cover_date=2024-05;,citation_year=2024;,citation_fulltext_html_url=https://www.ifaw.org/journal/conservation-projects-saving-endangered-wildlife;,citation_journal_title=IFAW;">
<meta name="citation_reference" content="citation_title=NOAA climate data record (CDR) of sea surface temperature - WHOI, version 2;,citation_author=Carol Anne Clayson;,citation_author=Jeremiah Brown;,citation_publication_date=2016;,citation_cover_date=2016;,citation_year=2016;,citation_fulltext_html_url=https://data.noaa.gov/onestop/collections/details/5eefa47a-85a9-42b3-ab25-5b0538905972;,citation_journal_title=OneStop National Oceanic and Atmospheric Administration;,citation_publisher=NOAA CDR Program;">
<meta name="citation_reference" content="citation_title=United states environmental protection agency _2025;,citation_publication_date=2025-01;,citation_cover_date=2025-01;,citation_year=2025;,citation_fulltext_html_url=https://www.epa.gov/climate-indicators/climate-change-indicators-sea-surface-temperature;,citation_journal_title=United States Environmental Protection Agency;,citation_publisher=Environmental Protection Agency;">
<meta name="citation_reference" content="citation_title=Tracking the causes and consequences of land change;,citation_author=undefined Communications;,citation_author=undefined Publishing;,citation_publication_date=2015-10;,citation_cover_date=2015-10;,citation_year=2015;,citation_fulltext_html_url=https://www.usgs.gov/news/featured-story/tracking-causes-and-consequences-land-change;,citation_journal_title=USGS - science for a changing world;,citation_publisher=USGS;">
<meta name="citation_reference" content="citation_publication_date=2023-06;,citation_cover_date=2023-06;,citation_year=2023;,citation_fulltext_html_url=https://www.ncei.noaa.gov/access/metadata/landing-page/bin/iso?id=gov.noaa.ncdc%253+AC00814;,citation_journal_title=National Centers for Environmental Information (NCEI);,citation_publisher=NCEI;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ESS 330 Project Proposals</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Authors</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Nina Hayford </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        The University
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Sierra Mattair </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        The University
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#proposal-1" id="toc-proposal-1" class="nav-link active" data-scroll-target="#proposal-1">Proposal 1</a></li>
  <li><a href="#proposal-2" id="toc-proposal-2" class="nav-link" data-scroll-target="#proposal-2">Proposal 2</a></li>
  <li><a href="#proposal-3" id="toc-proposal-3" class="nav-link" data-scroll-target="#proposal-3">Proposal 3</a></li>
  <li><a href="#proposal-4" id="toc-proposal-4" class="nav-link" data-scroll-target="#proposal-4">Proposal 4</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="proposal-1" class="level2">
<h2 class="anchored" data-anchor-id="proposal-1">Proposal 1</h2>
<p>Ocean Surface Temperature Rise Justification: Global sea temperatures have been rising for the last few decades due to climate change <span class="citation" data-cites="NOAACDR">(<a href="#ref-NOAACDR" role="doc-biblioref">Clayson &amp; Brown, 2016</a>)</span>. Ocean surface temperature rise affects ecosystems, ocean currents, and species biodiversity <span class="citation" data-cites="EPA">(<a href="#ref-EPA" role="doc-biblioref"><strong>EPA?</strong></a>)</span>. Sea temperature has been continuously higher since 1880 and is continuing to warm as populations increase and climate change affects worsen <span class="citation" data-cites="EPA">(<a href="#ref-EPA" role="doc-biblioref"><strong>EPA?</strong></a>)</span>. This data consists of sea surface temperature, near-surface atmospheric properties, and heat fluxes. This data spans from January of 1988 to present <span class="citation" data-cites="NOAACDR">(<a href="#ref-NOAACDR" role="doc-biblioref">Clayson &amp; Brown, 2016</a>)</span>. Research Question: How has ocean temperature changed over the last two decades and how is it impacting biodiversity? Hypothesis: Ocean temperature has been on a constant rise due to human activity contributing to climate change. Proposed Methods: We can use the data from NOAA about ocean surface temperature rise as well as Climate Change Indicators article by the EPA. We can also perform analysis in RStudio using tidyverse, ggplot2, and lm models. Expected Outcomes: We expect to see an increase in disturbed habitats and disrupted ecosystems. It will also show increased heatwaves and continuously rising surface temperature.</p>
</section>
<section id="proposal-2" class="level2">
<h2 class="anchored" data-anchor-id="proposal-2">Proposal 2</h2>
<p>Land Cover Change Justification: Since people have been on Earth they have constantly been changing the land to grow civilization. They would do this by building dams in rivers, clearing fields and forests for crops and housing, filling swamps, and growing their cities <span class="citation" data-cites="USGS">(<a href="#ref-USGS" role="doc-biblioref">Communications &amp; Publishing, 2015</a>)</span>. In recent decades, lots of land has been taken over for housing and agriculture to support continuously growing populations <span class="citation" data-cites="USGS">(<a href="#ref-USGS" role="doc-biblioref">Communications &amp; Publishing, 2015</a>)</span>. The data available shows cropland expansion and abandonment, pastureland expansion and abandonment, urbanization, and secondary forest regrowth because of wood harvest <span class="citation" data-cites="NCEI">(<a href="#ref-NCEI" role="doc-biblioref">2023</a>)</span>. Research Question: How has land cover changed over the last few decades, specifically focusing on urbanization and agricultural areas. Hypothesis: There has been a large decrease in forest areas due to deforestation for wood harvest, increased urbanization, and increased agriculture. Proposed Methods: I can use NOAA’s Land Cover Change Dataset as well as the USGS National Land Cover Database. I can also include analysis in RStudio using tidyverse, sf (spatial analysis), ggplot2, and randomForest (future predictions). Expected Outcomes: We expect to see an increase in urbanization and agriculture as well as a decrease in natural land cover areas. The data from NCEI might also show forest regrowth in areas of urban or agricultural abandonment.</p>
</section>
<section id="proposal-3" class="level2">
<h2 class="anchored" data-anchor-id="proposal-3">Proposal 3</h2>
<p>Altitudinal temperature differences across the US Justification: This would be an important topic to cover because in the realm of climate change, higher altitude regions tend to respond to climate change is complex ways <span class="citation" data-cites="Penn">(<a href="#ref-Penn" role="doc-biblioref"><span>“How Global Temperature and Weather Patterns Affect Mountain Climates | Penn LPS Online_2024,”</span> 2024</a>)</span>. Being able to track these interesting changes will provide us with data to help people understand why these regions respond in certain ways. The data we gather might also help us understand the highly impact areas that might be suffering from the impacts of climate change more than other areas. Another reason why this topic would be important to study is the fact that higher altitude areas are more sensitive to climate shifts <span class="citation" data-cites="ITT_User">(<a href="#ref-ITT_User" role="doc-biblioref">ITT_User, 2023</a>)</span>. With the climate shifting rapidly, there is much research to be done to see how sensitive these areas are and in what aspect. Lastly, high altitudes contribute to climate variability and play a role in atmospheric circulation patterns <span class="citation" data-cites="ITT_User">(<a href="#ref-ITT_User" role="doc-biblioref">ITT_User, 2023</a>)</span> so there could be much more effected by the altitudes than just the climate, which we could factor into our data. Research objective/question/hypothesis: The objective I aim to achieve in this study is to see how greater the temperature changes are in the high-altitude areas versus the low altitude areas. My hypothesis we’d be testing is, if we take climate data in the US from 1990 and compared it to data from today then we will see that higher altitude areas have higher temperature changes compared to low-altitude areas because higher altitude regions are more sensitive to climate change. Proposed Methods: To carry out this study we would have to take data from NOAA’s 1990 climate records in the US and 2024’s climate record in the US. Compare these two sets of data, in relation to altitude. Then see what areas had more extreme changes versus areas that didn’t have as extreme changes. To test the hypothesis, we’d have to categorize the data by altitude and then compare from there. Expected Outcomes: I expect there to be a greater change in temperature over time for the high-altitude regions and less change in temperature over time for the lower-altitude regions.</p>
</section>
<section id="proposal-4" class="level2">
<h2 class="anchored" data-anchor-id="proposal-4">Proposal 4</h2>
<p>Conservation and growing species<br>
Justification: Tracking biodiversity is extremely important to see the state of vulnerable species and to see what species might need looking after. Over the course of our century, many valuable species have been lost due to industrialization, anthropogenic climate change, hunting, and deforestation. With new conservation efforts, species have been able to regenerate the numbers they had once lost and create a bigger, stronger, community. For example, between 1960 and 2016, populations of brown bears increased by an average of 44% <span class="citation" data-cites="biodiversity">(<a href="#ref-biodiversity" role="doc-biblioref">Ritchie et al., 2022</a>)</span>. I believe that if we help conserve species and their habitats that threatened species might be able to get their numbers back up again. Another example of conservation helping revive animal species is when the IFAW changed the shipping routes to save endangered whales <span class="citation" data-cites="IFAW">(<a href="#ref-IFAW" role="doc-biblioref">2024</a>)</span>. Being able to track a species incline will help us see if conservation efforts are working or if they are not working for particular species. Research objective/question/hypothesis: The objective we aim to achieve in this study is to find out what species are recovering their numbers after a big loss? A hypothesis I would use to find this out is, if a species that was once declining starts inclining then there is reason to believe there were conservation efforts put into place because conservation helps species thrive.<br>
Proposed Methods: I plan to carry out this study by obtaining datasets of species numbers over the last 25 years. Once finding out what species had declined and inclined in the last 25 years, we can research those species to see if there were any conservation efforts to help that particular species. Once that research is done, we will be left with a small pool of species that (1) had a massive decline, (2) had a massive incline, (3) had conservation efforts put in place to help growth. Expected Outcomes: I expect us to find that almost all the species that inclined after a massive decline increased due to conservation efforts.</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-NCEI" class="csl-entry" role="listitem">
(2023). <em>National Centers for Environmental Information (NCEI)</em>. <a href="https://www.ncei.noaa.gov/access/metadata/landing-page/bin/iso?id=gov.noaa.ncdc%253+AC00814">https://www.ncei.noaa.gov/access/metadata/landing-page/bin/iso?id=gov.noaa.ncdc%253+AC00814</a>
</div>
<div id="ref-IFAW" class="csl-entry" role="listitem">
(2024). <em>IFAW</em>. <a href="https://www.ifaw.org/journal/conservation-projects-saving-endangered-wildlife">https://www.ifaw.org/journal/conservation-projects-saving-endangered-wildlife</a>
</div>
<div id="ref-NOAACDR" class="csl-entry" role="listitem">
Clayson, C. A., &amp; Brown, J. (2016). NOAA climate data record (CDR) of sea surface temperature - WHOI, version 2. <em>OneStop National Oceanic and Atmospheric Administration</em>. <a href="https://data.noaa.gov/onestop/collections/details/5eefa47a-85a9-42b3-ab25-5b0538905972">https://data.noaa.gov/onestop/collections/details/5eefa47a-85a9-42b3-ab25-5b0538905972</a>
</div>
<div id="ref-USGS" class="csl-entry" role="listitem">
Communications, &amp; Publishing. (2015). Tracking the causes and consequences of land change. <em>USGS - Science for a Changing World</em>. <a href="https://www.usgs.gov/news/featured-story/tracking-causes-and-consequences-land-change">https://www.usgs.gov/news/featured-story/tracking-causes-and-consequences-land-change</a>
</div>
<div id="ref-Penn" class="csl-entry" role="listitem">
How global temperature and weather patterns affect mountain climates | penn LPS online_2024. (2024). <em>How Global Temperature and Weather Patterns Affect Mountain Climates | Penn LPS Online</em>. <a href="https://lpsonline.sas.upenn.edu/features/how-global-temperature-and-weather-patterns-affect-mountain-climates">https://lpsonline.sas.upenn.edu/features/how-global-temperature-and-weather-patterns-affect-mountain-climates</a>
</div>
<div id="ref-ITT_User" class="csl-entry" role="listitem">
ITT_User. (2023). Altitude explained: Understanding the elements, risks, challenges, and research. <em>Ian Taylor Trekking</em>. <a href="https://iantaylortrekking.com/blog/altitude-explained-understanding-the-elements-risks-challenges-and-research/">https://iantaylortrekking.com/blog/altitude-explained-understanding-the-elements-risks-challenges-and-research/</a>
</div>
<div id="ref-biodiversity" class="csl-entry" role="listitem">
Ritchie, H., Spooner, F., &amp; Roser, M. (2022). Biodiversity. <em>Our World in Data</em>. <a href="https://ourworldindata.org/biodiversity">https://ourworldindata.org/biodiversity</a>
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>